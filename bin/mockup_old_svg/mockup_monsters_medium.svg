<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 800 600" width="800" height="600" onload="init(evt)">
<title>GearHead Mecha</title>
<script type="text/ecmascript" src="javascript_2.js"><![CDATA[

var TopPadding = 32
var LeftPadding = 0
var SVGObj
var path = 'images_mecha_medium/'
var extn = '.png'
var t_blank = ['blank']
var f_heavy = ['Terrain_Forest_Heavy','Terrain_Forest_Heavy_Mask']
var f_light = ['Terrain_Forest_Light','Terrain_Forest_Light_Mask']
var t_ferns_heavy = ['Terrain_Ferns_Heavy','Terrain_Ferns_Heavy_Mask']
var t_ferns_light = ['Terrain_Ferns_Light','Terrain_Ferns_Light_Mask']
var hill_a01 = ['Terrain_Hills_A01'], hill_a02 = ['Terrain_Hills_A02'], hill_a03 = ['Terrain_Hills_A03'], hill_a04 = ['Terrain_Hills_A04']
var hill_a05 = ['Terrain_Hills_A05'], hill_a06 = ['Terrain_Hills_A06'], hill_a07 = ['Terrain_Hills_A07'], hill_a08 = ['Terrain_Hills_A08']
var hill_a09 = ['Terrain_Hills_A09'], hill_a10 = ['Terrain_Hills_A10'], hill_a11 = ['Terrain_Hills_A11'], hill_a12 = ['Terrain_Hills_A12']
var hill_a13 = ['Terrain_Hills_A13'], hill_a14 = ['Terrain_Hills_A14'], hill_a15 = ['Terrain_Hills_A15'], hill_a16 = ['Terrain_Hills_A16']
var hill_b01 = ['Terrain_Hills_B01'], hill_b02 = ['Terrain_Hills_B02'], hill_b03 = ['Terrain_Hills_B03'], hill_b04 = ['Terrain_Hills_B04']
var hill_b05 = ['Terrain_Hills_B05'], hill_b06 = ['Terrain_Hills_B06'], hill_b07 = ['Terrain_Hills_B07'], hill_b08 = ['Terrain_Hills_B08']
var hill_b09 = ['Terrain_Hills_B09'], hill_b10 = ['Terrain_Hills_B10'], hill_b11 = ['Terrain_Hills_B11'], hill_b12 = ['Terrain_Hills_B12']
var hill_b13 = ['Terrain_Hills_B13'], hill_b14 = ['Terrain_Hills_B14'], hill_b15 = ['Terrain_Hills_B15'], hill_b16 = ['Terrain_Hills_B16']
var hill_c01 = ['Terrain_Hills_C01'], hill_c02 = ['Terrain_Hills_C02'], hill_c03 = ['Terrain_Hills_C03'], hill_c04 = ['Terrain_Hills_C04']
var hill_c05 = ['Terrain_Hills_C05'], hill_c06 = ['Terrain_Hills_C06'], hill_c07 = ['Terrain_Hills_C07'], hill_c08 = ['Terrain_Hills_C08']
var hill_c09 = ['Terrain_Hills_C09'], hill_c10 = ['Terrain_Hills_C10'], hill_c11 = ['Terrain_Hills_C11'], hill_c12 = ['Terrain_Hills_C12']
var hill_c13 = ['Terrain_Hills_C13'], hill_c14 = ['Terrain_Hills_C14'], hill_c15 = ['Terrain_Hills_C15'], hill_c16 = ['Terrain_Hills_C16']
var desert = ['Terrain_Desert']
var grass = ['Terrain_Grass']
var wastes = ['Terrain_Wastes']
var marsh = ['Terrain_Marsh']
var water_1 = ['Terrain_Water_Lvl1','Terrain_Water_Mask']
var water_2 = ['Terrain_Water_Lvl2','Terrain_Water_Mask']
var water_3 = ['Terrain_Water_Lvl3','Terrain_Water_Mask']

var terrain =
[
//0
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass]
]

var objects =
[
	//name, frames, y, x
//	['Shadow_Medium',1,1,0],
//	['btr_maanji',8,1,0],
]

function init(evt)
{
	SVGObj = evt.target.ownerDocument
	write_terrain()
	setInterval("cycle_animations()", 1000)
}

function cycle_animations()
{
	for (var i in objects)
	{
		var newobj = objects[i]
		var name = newobj[0]
		var frames = newobj[1]
		if (frames > 1)
		{
			var id = 'x' + newobj[2] + 'y' + newobj[3] + 'n' + newobj[0]
			var thisimg = SVGObj.getElementById(id)
			var thisframe = eval(thisimg.getAttribute('frame')) + 1
			if (thisframe > frames)
				thisframe = 1
			var src = get_src(name, frames, thisframe)
			thisimg.setAttribute('frame', thisframe)
			thisimg.setAttribute('xlink:href', path + src + extn)
		}
	}
}

function write_terrain()
{
	for (var i in terrain)
	{
		var top = i * 16 - 96 + TopPadding
		for (var k in terrain[i])
		{
			var left = k * 64 + LeftPadding
			if (i % 2 == 1)
				left = left + 32

			for (var j in terrain[i][k])
			{
				var id = 'x' + i + 'y' + k + 'n' + terrain[i][k][j]
				var src = terrain[i][k][j]
//				var newimg = SVGObj.createElement('image')
				var newimg = SVGObj.getElementById('img').cloneNode(false)
				newimg.setAttribute('x', left)
				newimg.setAttribute('y', top)
				newimg.setAttribute('width', 64)
				newimg.setAttribute('height', 128)
				newimg.setAttribute('id', id)
				newimg.setAttribute('xlink:href', path + src + extn)
				SVGObj.getElementById('mockup').appendChild(newimg)
//				alert(id + ' ' + path + src + extn)
				if (j == 0)
				{
					for (var m in objects)
					{
						var newobj = objects[m]
						if (newobj[2] == i)
						{
							if (newobj[3] == k)
							{
								var name = newobj[0]
								var frames = newobj[1]
								var top = newobj[2] * 16 - 96 + TopPadding
								var left = newobj[3] * 64 + LeftPadding
								if (newobj[2] % 2 == 1)
									left = left + 32
								var id = 'x' + newobj[2] + 'y' + newobj[3] + 'n' + newobj[0]
								var src = get_src(name, frames, 1)
//								var newimg = SVGObj.createElement('image')
								var newimg = SVGObj.getElementById('img').cloneNode(false)
								newimg.setAttribute('x', left)
								newimg.setAttribute('y', top)
								newimg.setAttribute('width', 64)
								newimg.setAttribute('height', 128)
								newimg.setAttribute('id', id)
								newimg.setAttribute('frame', 1)
								newimg.setAttribute('xlink:href', path + src + extn)
								SVGObj.getElementById('mockup').appendChild(newimg)
							}
						}
					}
				}
			}
		}
	}
}

function get_src(name, frames, num)
{
	var src = ''
	num = num.toString()
	if (frames == 1)
	{
		src = name
	}
	else
	{
		var lognum = Math.floor(Math.log10(frames)) + 1
		while (num.length < lognum)
		{
			num = '0' + num
		}
		src = name + num
	}
	return src
}

Math.log10 = function(number)
{
	return Math.log(number)/Math.LN10
}

]]></script>
	<g id="mockup">
		<image id="img" x="0" y="0" width="0" height="0" xlink:href="" />
	</g>
</svg>
