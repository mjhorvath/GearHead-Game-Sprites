<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>GearHead - Terrain Demo</title>
		<script type="text/javascript">
var path = 'terrain/frames/'
var extn = '.png'
var pad_lft = 64
var pad_top = 64
var t_blank = ['blank',null]
var d_heavy_a = ['Terrain_FlatTree_a_HeavyRear','Terrain_FlatTree_a_HeavyFront']
var d_light_a = ['Terrain_FlatTree_a_LightRear','Terrain_FlatTree_a_LightFront']
var d_heavy_b = ['Terrain_FlatTree_b_HeavyRear','Terrain_FlatTree_b_HeavyFront']
var d_light_b = ['Terrain_FlatTree_b_LightRear','Terrain_FlatTree_b_LightFront']
var p_heavy_a = ['Terrain_FlatTree_c_HeavyRear','Terrain_FlatTree_c_HeavyFront']
var p_light_a = ['Terrain_FlatTree_c_LightRear','Terrain_FlatTree_c_LightFront']
var p_heavy_b = ['Terrain_FlatTree_d_HeavyRear','Terrain_FlatTree_d_HeavyFront']
var p_light_b = ['Terrain_FlatTree_d_LightRear','Terrain_FlatTree_d_LightFront']
var t_ferns = ['Terrain_FlatFerns_Rear','Terrain_FlatFerns_Front']
var t_wheat = ['Terrain_FlatWheat_Rear','Terrain_FlatWheat_Front']
var t_reeds = ['terrain_flatreeds_rear','terrain_flatreeds_front']
var desert = ['Terrain_FlatDesert',null]
var grass = ['Terrain_FlatGrass',null]
var wastes = ['Terrain_FlatWastes',null]
var marsh = ['Terrain_FlatMarsh',null]
var gravel = ['Terrain_FlatGravel',null]
var corncrop = ['Terrain_FlatCornCrop',null]
var wheatcrop = ['Terrain_FlatWheatCrop',null]
var water_1 = ['Terrain_Water_Rear_a','Terrain_Water_Front']
var water_2 = ['Terrain_Water_Rear_b','Terrain_Water_Front']
var water_3 = ['Terrain_Water_Rear_c','Terrain_Water_Front']

var terrain =
[
//0
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[p_heavy_a,p_heavy_a,p_heavy_b,p_heavy_b,d_heavy_a,d_heavy_a,d_heavy_b,d_heavy_b,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
//8
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[t_ferns,t_ferns,t_reeds,t_reeds,t_wheat,t_wheat,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
//16
	[wheatcrop,wheatcrop,corncrop,corncrop,gravel,gravel,desert,desert,marsh,marsh,wastes,wastes],
	[wheatcrop,wheatcrop,corncrop,corncrop,gravel,gravel,desert,desert,marsh,marsh,wastes,wastes],
	[wheatcrop,wheatcrop,corncrop,corncrop,gravel,gravel,desert,desert,marsh,marsh,wastes,wastes],
	[wheatcrop,wheatcrop,corncrop,corncrop,gravel,gravel,desert,desert,marsh,marsh,wastes,wastes],
	[water_1,water_1,water_1,water_1,water_2,water_2,water_2,water_2,water_3,water_3,water_3,water_3],
	[water_1,water_1,water_1,water_1,water_2,water_2,water_2,water_2,water_3,water_3,water_3,water_3],
	[water_1,water_1,water_1,water_1,water_2,water_2,water_2,water_2,water_3,water_3,water_3,water_3],
	[water_1,water_1,water_1,water_1,water_2,water_2,water_2,water_2,water_3,water_3,water_3,water_3],
//24
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass],
	[grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass,grass]
]

var objects =
[
	//name, frames, y, x
	['Terrain_Hills_a00',1,0,9],
	['Terrain_Hills_a01',1,1,9],
	['Terrain_Hills_a02',1,2,9],
	['Terrain_Hills_a03',1,3,9],
	['Terrain_Hills_a04',1,4,9],
	['Terrain_Hills_a05',1,5,9],
	['Terrain_Hills_a06',1,6,9],
	['Terrain_Hills_a07',1,7,9],
	['Terrain_Hills_a08',1,8,9],
	['Terrain_Hills_a09',1,9,9],
	['Terrain_Hills_a10',1,10,9],
	['Terrain_Hills_a11',1,11,9],
	['Terrain_Hills_a12',1,12,9],
	['Terrain_Hills_a13',1,13,9],
	['Terrain_Hills_a14',1,14,9],
	['Terrain_Hills_a15',1,15,9],
	['Terrain_Hills_b00',1,0,10],
	['Terrain_Hills_b01',1,1,10],
	['Terrain_Hills_b02',1,2,10],
	['Terrain_Hills_b03',1,3,10],
	['Terrain_Hills_b04',1,4,10],
	['Terrain_Hills_b05',1,5,10],
	['Terrain_Hills_b06',1,6,10],
	['Terrain_Hills_b07',1,7,10],
	['Terrain_Hills_b08',1,8,10],
	['Terrain_Hills_b09',1,9,10],
	['Terrain_Hills_b10',1,10,10],
	['Terrain_Hills_b11',1,11,10],
	['Terrain_Hills_b12',1,12,10],
	['Terrain_Hills_b13',1,13,10],
	['Terrain_Hills_b14',1,14,10],
	['Terrain_Hills_b15',1,15,10],
	['Terrain_Hills_c00',1,0,11],
	['Terrain_Hills_c01',1,1,11],
	['Terrain_Hills_c02',1,2,11],
	['Terrain_Hills_c03',1,3,11],
	['Terrain_Hills_c04',1,4,11],
	['Terrain_Hills_c05',1,5,11],
	['Terrain_Hills_c06',1,6,11],
	['Terrain_Hills_c07',1,7,11],
	['Terrain_Hills_c08',1,8,11],
	['Terrain_Hills_c09',1,9,11],
	['Terrain_Hills_c10',1,10,11],
	['Terrain_Hills_c11',1,11,11],
	['Terrain_Hills_c12',1,12,11],
	['Terrain_Hills_c13',1,13,11],
	['Terrain_Hills_c14',1,14,11],
	['Terrain_Hills_c15',1,15,11],
	['roads_large00',1,24,0],
	['roads_large01',1,25,0],
	['roads_large02',1,26,0],
	['roads_large03',1,27,0],
	['roads_large04',1,24,1],
	['roads_large05',1,25,1],
	['roads_large06',1,26,1],
	['roads_large07',1,27,1],
	['roads_large08',1,24,2],
	['roads_large09',1,25,2],
	['roads_large10',1,26,2],
	['roads_large11',1,27,2],
	['roads_large12',1,24,3],
	['roads_large13',1,25,3],
	['roads_large14',1,26,3],
	['roads_large15',1,27,3],
	['roads_small00',1,24,4],
	['roads_small01',1,25,4],
	['roads_small02',1,26,4],
	['roads_small03',1,27,4],
	['roads_small04',1,24,5],
	['roads_small05',1,25,5],
	['roads_small06',1,26,5],
	['roads_small07',1,27,5],
	['roads_small08',1,24,6],
	['roads_small09',1,25,6],
	['roads_small10',1,26,6],
	['roads_small11',1,27,6],
	['roads_small12',1,24,7],
	['roads_small13',1,25,7],
	['roads_small14',1,26,7],
	['roads_small15',1,27,7],
	['btr_chimentero3',1,3,0],
	['btr_chimentero3',1,3,2],
	['btr_chimentero3',1,3,4],
	['btr_chimentero3',1,3,6],
	['btr_chimentero3',1,11,0],
	['btr_chimentero3',1,11,2],
	['btr_chimentero3',1,11,4],
	['btr_chimentero3',1,11,6]
]

function init()
{
	write_terrain()
//	setInterval("cycle_animations()", 1000)
}

function cycle_animations()
{
	for (var i = 0, n = objects.length; i < n; i++)
	{
		var newobj = objects[i]
		var name = newobj[0]
		var frames = newobj[1]
		if (frames > 1)
		{
			var id = 'x' + newobj[2] + 'y' + newobj[3] + 'n' + newobj[0]
			var thisimg = document.getElementById(id)
			var thisframe = eval(thisimg.getAttribute('frame')) + 1
			if (thisframe > frames)
				thisframe = 1
			var src = get_src(name, frames, thisframe)
			thisimg.setAttribute('frame', thisframe)
			thisimg.setAttribute('src', path + src + extn)
		}
	}
}

function write_terrain()
{
	for (var i = 0, n = terrain.length; i < n; i++)
	{
		var this_terrain_i = terrain[i]
		var top = pad_top + i * 16 - 96
		for (var k = 0, p = this_terrain_i.length; k < p; k++)
		{
			var this_terrain_k = this_terrain_i[k]
			var lft = pad_lft + k * 64
			if (i % 2 == 1)
			{
				lft = lft + 32
			}
			var src = this_terrain_k[0]
			var id = 'x' + i + 'y' + k + 'n' + src
			var newimg = document.getElementById('img').cloneNode(false)
			var randframe = Math.floor(Math.random() * 8)
//			var randframe = 0
			newimg.style.left = lft + 'px'
			newimg.style.top = top + 'px'
			newimg.style.width = 64 + 'px'
			newimg.style.height = 128 + 'px'
			newimg.style.zIndex = 1
			newimg.setAttribute('id', id)
			newimg.setAttribute('src', path + src + randframe + extn)
			document.getElementById('mockup').appendChild(newimg)

			for (var m = 0, r = objects.length; m < r; m++)
			{
				var newobj = objects[m]
				if (newobj[2] == i)
				{
					if (newobj[3] == k)
					{
						var name = newobj[0]
						var frames = newobj[1]
						var top = pad_top + newobj[2] * 16 - 96
						var lft = pad_lft + newobj[3] * 64
						if (newobj[2] % 2 == 1)
							lft = lft + 32
						var id = 'x' + newobj[2] + 'y' + newobj[3] + 'n' + newobj[0]
						var src = get_src(name, frames, 1)
						var newimg = document.getElementById('img').cloneNode(false)
						newimg.style.left = lft + 'px'
						newimg.style.top = top + 'px'
						newimg.style.width = 64 + 'px'
						newimg.style.height = 128 + 'px'
						newimg.style.zIndex = 1
						newimg.setAttribute('id', id)
						newimg.setAttribute('frame', 1)
						newimg.setAttribute('src', path + src + extn)
						document.getElementById('mockup').appendChild(newimg)
					}
				}
			}
			if (this_terrain_k[1])
			{
				var lft = pad_lft + k * 64
				if (i % 2 == 1)
				{
					lft = lft + 32
				}
				var src = this_terrain_k[1]
				var id = 'x' + i + 'y' + k + 'n' + src
				var newimg = document.getElementById('img').cloneNode(false)
				var randframe = Math.floor(Math.random() * 8)
//				var randframe = 0
				newimg.style.left = lft + 'px'
				newimg.style.top = top + 'px'
				newimg.style.width = 64 + 'px'
				newimg.style.height = 128 + 'px'
				newimg.style.zIndex = 1
				newimg.setAttribute('id', id)
				newimg.setAttribute('src', path + src + randframe + extn)
				document.getElementById('mockup').appendChild(newimg)
			}
		}
	}
}

function get_src(name, frames, num)
{
	var src = ''
	num = num.toString()
	if (frames == 1)
		src = name
	else
	{
		var lognum = Math.floor(Math.log10(frames)) + 1
		while (num.length < lognum)
			num = '0' + num
		src = name + num
	}
	return src
}

Math.log10 = function(number)
{
	return Math.log(number)/Math.LN10
}

		</script>
	</head>
	<body onload="init()" style="background:#888 url(axes.png);font-family:monospace;">
		<div id="mockup">
			<img id="img" src="" style="left:0px;top:0px;width:0px;height:0px;position:absolute;"/>
		</div>
		<div style="position:absolute;top:0px;z-index:20;">
			<a href="chars_demo.html">chars_demo.html</a>
			<a href="effects_demo.html">effects_demo.html</a>
			<a href="floors_demo.html">floors_demo.html</a>
			<a href="mecha_demo.html">mecha_demo.html</a>
			<a href="monsters_demo.html">monsters_demo.html</a>
			<a href="props_demo.html">props_demo.html</a>
			<a href="terrain_demo.html">terrain_demo.html</a>
			<a href="walls_demo.html">walls_demo.html</a>
		</div>
	</body>
</html>
